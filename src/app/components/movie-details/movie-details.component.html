<div class="details-container">
    <div class="rating-page" *ngIf="rateClicked">
        <div class="rating-section">
            <a  (click)="onOkClicked()">X</a>
            <p>Rate this movie</p>
            <p class="rate-value">{{ sliderValue }}.0</p>
            <div class="rating-slider">
                <!-- <div class="rating-bar" [style.width]="getSliderBarWidth()" #ratingBar></div> -->
                <input type="range" min="1" max="10" [(ngModel)]="sliderValue" (input)="onRatingChange(sliderValue)" class="slider">
            </div>
            <div class="ok-btn-section">
                <button class="ok-btn" type="button" (click)="onOkClicked()">Ok</button>
            </div>
            </div>
    </div>
    <div class="header-section">
        <a routerLink="/"><svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20.6809 25.5C20.515 25.5 20.3492 25.4394 20.2182 25.3097L14.5272 19.6687C13.602 18.7516 13.602 17.2462 14.5272 16.3291L20.2182 10.6882C20.4714 10.4373 20.8903 10.4373 21.1435 10.6882C21.3966 10.9391 21.3966 11.3544 21.1435 11.6053L15.4525 17.2462C15.0335 17.6615 15.0335 18.3363 15.4525 18.7516L21.1435 24.3926C21.3966 24.6435 21.3966 25.0588 21.1435 25.3097C21.0125 25.4308 20.8467 25.5 20.6809 25.5Z" fill="white"/>
            </svg>
         </a>
         <span>Details</span>
         <a class="save-movie" href="#" (click)="toggleWatchlist($event)">
            <svg [ngClass]="{'saved': isMovieInWatchlist}" width="22" height="24" viewBox="0 0 22 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6963 18.6316L5.32373 21.881C4.89477 22.1271 4.3663 21.9529 4.12982 21.4874V21.4874C4.0614 21.3432 4.02449 21.1834 4.02203 21.0206V6.62244C4.02203 3.87644 5.7217 2.77805 8.16756 2.77805H13.9133C16.2845 2.77805 18.0588 3.80322 18.0588 6.43937V21.0206C18.0588 21.2804 17.9653 21.5295 17.7989 21.7132C17.6326 21.8968 17.4069 22 17.1716 22C17.0216 21.9974 16.874 21.9567 16.7405 21.881L11.3347 18.6316C11.1355 18.5128 10.8955 18.5128 10.6963 18.6316Z" stroke="#67686D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
         </a>
    </div>
    <div class="information-section">
        <div class="movie-background">
            <img [src]="backdrop_path" alt="">
            <div class="rating" (click)="onRateClick()">
                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.27569 10.9208L10.4279 12.9179C10.8308 13.1732 11.3311 12.7935 11.2115 12.3232L10.3008 8.74052C10.2752 8.64073 10.2782 8.53573 10.3096 8.4376C10.3409 8.33946 10.3994 8.25218 10.4781 8.18577L13.3049 5.83306C13.6763 5.52392 13.4846 4.90751 13.0074 4.87654L9.31588 4.63696C9.21645 4.62986 9.12109 4.59465 9.04089 4.53545C8.96069 4.47625 8.89896 4.39548 8.86289 4.30255L7.48612 0.835486C7.44869 0.736852 7.38215 0.651935 7.29532 0.592013C7.2085 0.532092 7.1055 0.5 7 0.5C6.89451 0.5 6.79151 0.532092 6.70468 0.592013C6.61786 0.651935 6.55131 0.736852 6.51389 0.835486L5.13712 4.30255C5.10104 4.39548 5.03931 4.47625 4.95912 4.53545C4.87892 4.59465 4.78355 4.62986 4.68412 4.63696L0.992627 4.87654C0.515435 4.90751 0.323731 5.52392 0.695149 5.83306L3.52185 8.18577C3.60063 8.25218 3.65906 8.33946 3.69044 8.4376C3.72181 8.53573 3.72485 8.64073 3.6992 8.74052L2.85459 12.063C2.71111 12.6274 3.31143 13.083 3.79495 12.7767L6.72431 10.9208C6.8067 10.8683 6.90234 10.8405 7 10.8405C7.09767 10.8405 7.1933 10.8683 7.27569 10.9208V10.9208Z" stroke="#FF8700" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg> 
                <span style="color: #FF8700;">{{ getFormattedVoteAverage() }}</span>
            </div>
        </div>
        <div class="img-name">
            <img  [src]="imgUrl" alt="">
            <p>{{ movie?.title || 'N/A' }}</p>
        </div>
        <div class="movie-details">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M13 2.5H3C2.72386 2.5 2.5 2.72386 2.5 3V13C2.5 13.2761 2.72386 13.5 3 13.5H13C13.2761 13.5 13.5 13.2761 13.5 13V3C13.5 2.72386 13.2761 2.5 13 2.5Z" stroke="#92929D" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M11 1.5V3.5" stroke="#92929D" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M5 1.5V3.5" stroke="#92929D" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2.5 5.5H13.5" stroke="#92929D" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>{{ movie?.release_date.substring(0,4) || 'N/A' }}</span>
            <span>|</span>
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z" stroke="#92929D" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M8 4.5V8H11.5" stroke="#92929D" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>{{ movie?.runtime || 'N/A' }} Minutes</span>
            <span>|</span>
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6 3.5V12.5" stroke="#92929D" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M1.5 10.4494C1.49998 10.3342 1.53979 10.2225 1.61268 10.1334C1.68557 10.0442 1.78706 9.98292 1.89995 9.96C2.35166 9.86772 2.75763 9.62224 3.04919 9.26509C3.34075 8.90794 3.5 8.46104 3.5 8C3.5 7.53896 3.34075 7.09206 3.04919 6.73491C2.75763 6.37776 2.35166 6.13228 1.89995 6.04C1.78706 6.01708 1.68557 5.95584 1.61268 5.86664C1.53979 5.77745 1.49998 5.6658 1.5 5.55061V4C1.5 3.86739 1.55268 3.74021 1.64645 3.64645C1.74021 3.55268 1.86739 3.5 2 3.5H14C14.1326 3.5 14.2598 3.55268 14.3536 3.64645C14.4473 3.74021 14.5 3.86739 14.5 4V5.55061C14.5 5.6658 14.4602 5.77745 14.3873 5.86665C14.3144 5.95584 14.2129 6.01708 14.1001 6.04C13.6483 6.13229 13.2424 6.37777 12.9508 6.73492C12.6592 7.09207 12.5 7.53896 12.5 8C12.5 8.46105 12.6592 8.90794 12.9508 9.26509C13.2424 9.62224 13.6483 9.86772 14.1001 9.96001C14.2129 9.98292 14.3144 10.0442 14.3873 10.1334C14.4602 10.2225 14.5 10.3342 14.5 10.4494V12C14.5 12.1326 14.4473 12.2598 14.3536 12.3536C14.2598 12.4473 14.1326 12.5 14 12.5H2C1.86739 12.5 1.74021 12.4473 1.64645 12.3536C1.55268 12.2598 1.5 12.1326 1.5 12V10.4494Z" stroke="#92929D" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>{{ movie?.genres[0]?.name || 'N/A' }}</span>
        </div>
    </div>
    <div class="nav-section">
        <nav>
            <ul>
                <li><a (click)="selectedApi = 'about'" [ngClass]="{'active': selectedApi === 'about'}">About Movie</a></li>
                <li><a (click)="selectedApi = 'reviews'" [ngClass]="{'active': selectedApi === 'reviews'}">Reviews</a></li>
                <li><a (click)="selectedApi = 'cast'" [ngClass]="{'active': selectedApi === 'cast'}">Cast</a></li>
            </ul>
        </nav>
        <div class="content-grid">
        <ng-container *ngIf="selectedApi === 'about'">
            <div class="description">
                <p>{{ movie?.overview || 'N/A' }}</p>
            </div>
          </ng-container>
        <ng-container *ngIf="selectedApi === 'reviews'">
            <div class="reviews">
                <div class="review-element" *ngFor="let review of reviews_info; let i = index">
                    <div class="user-img-rating">
                        <img src="../../../assets/images/user.png" alt="">
                        <p>{{ reviews_info[i].author_details.rating}}</p>
                    </div>
                    <div class="user-comment">
                        <p>{{ reviews_info[i].content }}</p>
                    </div>
                </div>
            </div>
          </ng-container>
        <ng-container *ngIf="selectedApi === 'cast'">
            <div class="cast">
                <div class="actor" *ngFor="let actor of cast">
                    <div class="actor-img">
                        <img [src]="actor.profile_path ? 'https://image.tmdb.org/t/p/w200' + actor.profile_path : '../../../assets/images/user.png'" alt="Picture" alt="Picture">
                    </div>
                    <div class="actor-name">
                        <p>{{ actor.name }}</p>
                    </div>
                </div>
          </div>
          </ng-container>
    </div>
</div>
